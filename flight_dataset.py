# -*- coding: utf-8 -*-
"""Flight Dataset.ipynb

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/1NdggAkKWmHbv2Vcnw7tchw5ZSgQa-F1r
"""

!pip install -q opendatasets

"""***Kaggle Details:***
{"username":"dockumar","key":"be08cfb8e6636e7e0999f9896bf97fe1"}
"""

import opendatasets as od
od.download("https://www.kaggle.com/datasets/rohitgrewal/airlines-flights-data")

import pandas as pd
import numpy as np
import matplotlib.pyplot as plt
import seaborn as sns

df = pd.read_csv("//content/airlines-flights-data/airlines_flights_data.csv")

df.head(5)



"""# Task
Analyze the flight data set and generate 5-7 relevant graphs using matplotlib and seaborn. Provide a clear explanation for each graph, including the reason for its creation and how it helps understand the data.

## Data exploration

### Subtask:
Analyze the dataset to identify key features and potential relationships suitable for visualization.

**Reasoning**:
Display basic information about the DataFrame using `.info()` and descriptive statistics using `.describe()` to understand data types, missing values, and numerical distributions.
"""

df.info()
df.describe()

"""**Reasoning**:
Examine the unique values and their counts for categorical columns to understand their distribution and identify potential features for visualization.


"""

for col in ['airline', 'source_city', 'departure_time', 'stops', 'arrival_time', 'destination_city', 'class']:
    print(f"Value counts for {col}:")
    print(df[col].value_counts())
    print("\n")

"""**Reasoning**:
Based on the information gathered from `df.info()`, `df.describe()`, and value counts of categorical columns, identify potential relationships between columns for visualization. These include relationships between numerical features like price and duration or days left, and relationships between categorical features and price.


"""

print("Potential relationships for visualization:")
print("- Price vs. Duration (Numerical vs. Numerical)")
print("- Price vs. Days Left (Numerical vs. Numerical)")
print("- Airline vs. Price (Categorical vs. Numerical)")
print("- Source City vs. Price (Categorical vs. Numerical)")
print("- Destination City vs. Price (Categorical vs. Numerical)")
print("- Class vs. Price (Categorical vs. Numerical)")
print("- Stops vs. Price (Categorical vs. Numerical)")
print("- Departure Time vs. Price (Categorical vs. Numerical)")
print("- Arrival Time vs. Price (Categorical vs. Numerical)")
print("- Relationship between cities and airlines")

"""## Visualization generation

### Subtask:
Create 5-7 relevant graphs using matplotlib and seaborn to represent the data.

**Reasoning**:
Create scatter plots to visualize the relationship between 'duration' and 'price', and 'days_left' and 'price'.
"""

plt.figure(figsize=(12, 5))

plt.subplot(1, 2, 1)
sns.scatterplot(data=df, x='duration', y='price', alpha=0.5)
plt.title('Price vs. Duration')

plt.subplot(1, 2, 2)
sns.scatterplot(data=df, x='days_left', y='price', alpha=0.5)
plt.title('Price vs. Days Left')

plt.tight_layout()
plt.show()

"""**Reasoning**:
Create box plots to show the distribution of 'price' across different 'airline', 'class', and 'stops' categories.


"""

plt.figure(figsize=(18, 6))

plt.subplot(1, 3, 1)
sns.boxplot(data=df, x='airline', y='price')
plt.title('Price Distribution by Airline')
plt.xticks(rotation=45, ha='right')

plt.subplot(1, 3, 2)
sns.boxplot(data=df, x='class', y='price')
plt.title('Price Distribution by Class')

plt.subplot(1, 3, 3)
sns.boxplot(data=df, x='stops', y='price')
plt.title('Price Distribution by Stops')

plt.tight_layout()
plt.show()

"""**Reasoning**:
Create count plots to show the frequency of flights from each 'source_city' and to each 'destination_city'.


"""

plt.figure(figsize=(12, 5))

plt.subplot(1, 2, 1)
sns.countplot(data=df, x='source_city', order=df['source_city'].value_counts().index)
plt.title('Flight Frequency by Source City')
plt.xticks(rotation=45, ha='right')

plt.subplot(1, 2, 2)
sns.countplot(data=df, x='destination_city', order=df['destination_city'].value_counts().index)
plt.title('Flight Frequency by Destination City')
plt.xticks(rotation=45, ha='right')

plt.tight_layout()
plt.show()

"""## Explanation

### Subtask:
Provide a clear explanation for each graph, including the reason for its creation and how it helps understand the data.

**Reasoning**:
Provide a clear explanation for each of the seven generated graphs based on the previous analysis and the plots generated in the previous step.
"""

print("Explanation for Graphs:")

print("\n--- Graph 1: Price vs. Duration (Scatter Plot) ---")
print("What it shows: This scatter plot visualizes the relationship between the duration of a flight and its price.")
print("Reason for choice: A scatter plot is used to observe if there is a correlation or pattern between two numerical variables.")
print("Interpretation: The plot reveals a general trend where longer durations tend to be associated with higher prices, but there is significant spread, especially for shorter durations. This suggests duration is a factor but not the sole determinant of price.")
print("How it helps understand the data: This graph helps us understand how flight duration might influence pricing and identify potential outliers or unusual pricing strategies where long flights are unexpectedly cheap or short flights are expensive.")

print("\n--- Graph 2: Price vs. Days Left (Scatter Plot) ---")
print("What it shows: This scatter plot displays the relationship between the number of days left until departure and the flight price.")
print("Reason for choice: A scatter plot is used to visualize the relationship and potential trends between two numerical variables over a range.")
print("Interpretation: The plot suggests that prices generally increase as the number of days left decreases, especially for flights booked very close to the departure date. There's a wide range of prices for bookings made well in advance.")
print("How it helps understand the data: This graph helps understand the impact of booking time on flight prices and supports the common knowledge that booking closer to departure is often more expensive.")

print("\n--- Graph 3: Price Distribution by Airline (Box Plot) ---")
print("What it shows: This box plot shows the distribution of flight prices for each airline.")
print("Reason for choice: A box plot is suitable for comparing the distribution (median, quartiles, outliers) of a numerical variable across different categories.")
print("Interpretation: The plot clearly shows that Vistara has a significantly higher median price and a wider range of prices, particularly with many outliers at higher prices, compared to other airlines like Indigo and SpiceJet which have lower and less spread out price distributions.")
print("How it helps understand the data: This graph highlights the pricing strategies and price ranges of different airlines, indicating that Vistara generally operates in a higher price segment, likely due to offering more premium services or business class options (as seen in subsequent plots).")

print("\n--- Graph 4: Price Distribution by Class (Box Plot) ---")
print("What it shows: This box plot compares the distribution of flight prices between Economy and Business classes.")
print("Reason for choice: A box plot is effective for comparing the distribution of a numerical variable between two distinct categories.")
print("Interpretation: The plot shows a stark difference in price distributions, with Business class having significantly higher median prices and a much wider range than Economy class. There's a clear separation between the price points of the two classes.")
print("How it helps understand the data: This graph is crucial for understanding the impact of flight class on price, confirming that Business class flights are considerably more expensive than Economy class flights, which is a fundamental aspect of airline pricing.")

print("\n--- Graph 5: Price Distribution by Stops (Box Plot) ---")
print("What it shows: This box plot illustrates the distribution of flight prices based on the number of stops (zero, one, or two or more).")
print("Reason for choice: A box plot allows for the comparison of the distribution of a numerical variable across multiple discrete categories.")
print("Interpretation: The plot shows that flights with 'one' stop generally have the highest median prices, followed by 'two or more' stops, and then 'zero' stops (non-stop flights). This is somewhat counter-intuitive as non-stop flights are often expected to be more expensive.")
print("How it helps understand the data: This graph provides insight into how the number of stops affects pricing. The observation about 'one' stop flights being potentially more expensive warrants further investigation, possibly related to specific routes or airline strategies.")

print("\n--- Graph 6: Flight Frequency by Source City (Count Plot) ---")
print("What it shows: This count plot displays the number of flights originating from each source city.")
print("Reason for choice: A count plot is used to show the frequency of occurrences for each category in a categorical variable.")
print("Interpretation: The plot clearly shows that Delhi and Mumbai are the busiest source cities with the highest number of outgoing flights, followed by Bangalore and Kolkata.")
print("How it helps understand the data: This graph helps identify the major flight hubs in the dataset, indicating where the majority of flight activity originates. This information is useful for understanding the dataset's geographical focus.")

print("\n--- Graph 7: Flight Frequency by Destination City (Count Plot) ---")
print("What it shows: This count plot displays the number of flights arriving at each destination city.")
print("Reason for choice: A count plot is used to show the frequency of occurrences for each category in a categorical variable.")
print("Interpretation: Similar to source cities, Delhi and Mumbai are also the most frequent destination cities, receiving the highest number of incoming flights. Bangalore and Kolkata are also significant destinations.")
print("How it helps understand the data: This graph complements the source city analysis by showing the major flight destinations. Together, the source and destination city plots highlight the key city pairs and the overall connectivity within the dataset.")

"""## Summary:

### Data Analysis Key Findings

*   The dataset contains 300,153 entries with no missing values.
*   Vistara is the most frequent airline, while Delhi and Mumbai are the most frequent source and destination cities.
*   Economy class is significantly more frequent than Business class.
*   Longer flight durations generally correlate with higher prices, although there is considerable variation.
*   Flight prices tend to increase as the departure date approaches.
*   Vistara airline has a notably higher median price and wider price range compared to other airlines like Indigo and SpiceJet.
*   Business class flights are substantially more expensive than Economy class flights.
*   Flights with one stop generally show higher median prices than non-stop flights or flights with two or more stops.
*   Delhi and Mumbai are the primary flight hubs in the dataset, both as source and destination cities.

### Insights or Next Steps

*   Investigate the reason why flights with one stop might be priced higher than non-stop flights, potentially exploring specific routes or airline strategies.
*   Further analyze the outliers in price distributions, especially for airlines like Vistara and for flights with shorter durations, to understand potential premium offerings or specific route dynamics.

"""